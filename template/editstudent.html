{% extends "base.html" %}
{% block body %}

    {% comment %} <!-- Edit Student Form -->
    <div class="container mt-5">
        <h2 class="text-center mb-4">Edit Student Details</h2>
        <form method="post" class="shadow p-4 rounded bg-light" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="first_name" class="form-label">First Name</label>
                <input type="text" name="fname" id="" class="form-control" value="{{ s.fname }}" required>
            </div>
            <div class="mb-3">
                <label for="first_name" class="form-label">Middle Name</label>
                <input type="text" name="mname" id="" class="form-control" value="{{ s.mname }}" required>
            </div>
            <div class="mb-3">
                <label for="last_name" class="form-label">Last Name</label>
                <input type="text" name="lname" id="" class="form-control" value="{{ s.lname }}" required>
            </div>
            <div class="mb-3">
                <label for="gender" class="form-label">Gender</label>
                <select name="gender" id="gender" class="form-select" required>
                    <option value="Male" {% if s.gender == 'Male' %}selected{% endif %}>Male</option>
                    <option value="Female" {% if s.gender == 'Female' %}selected{% endif %}>Female</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" name="email" id="email" class="form-control" value="{{ s.email }}" required>
            </div>
            <div class="mb-3">
                <label for="phone" class="form-label">Phone</label>
                <input type="text" name="phone" id="phone" class="form-control" value="{{ s.phone }}" required>
            </div>
            <div class="mb-3">
                <label for="city" class="form-label">City</label>
                <select class="form-select" value="{{s.city}}" name="city" id="city">
                    <option value="Ahemadabad" {% if s.city == 'Ahemadabad' %}selected{% endif %}>Ahemadabad</option>
                    <option value="Surendarnagar" {% if s.city == 'Surendarnagar' %}selected{% endif %}>Surendarnagar</option>
                    <option value="Bhavanagar" {% if s.city == 'Bhavanagar' %}selected{% endif %}>Bhavanagar</option>
                    <option value="Surat" {% if s.city == 'Surat' %}selected{% endif %}>Surat</option>
                    <option value="Gandhinagar" {% if s.city == 'Gandhinagar' %}selected{% endif %}>Gandhinagar</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <textarea name="address" id="address" class="form-control" rows="3" required>{{ s.address }}</textarea>
            </div>

            <div class="mb-3">
                <label for="first_name" class="form-label">Couress</label>
                <input type="text" name="coures" id="" class="form-control" value="{{ s.coures }}" required>
            </div>
            <div class="mb-3">
                <label for="first_name" class="form-label">Fees</label>
                <input type="text" name="amount" id="" class="form-control" value="{{ s.amount }}" required>
            </div>
            <div class="mb-3">
                <label for="last_name" class="form-label">Date of admission</label>
                <input type="date" name="admission_date" id="" class="form-control" value="{{ s.admission_date }}" required>
            </div>

            <div class="mb-3">
                <label for="image" class="form-label">Profile Image</label>
                <input type="file" name="image" value="" id="image" class="form-control">
            </div>
            <div class="text-center mt-3">
                <button type="submit" class="btn btn-primary">Save Changes</button>
                <a href="{% url 'showlist' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>

 {% endcomment %}

    <style>
        body{
            background-image: url(/static/addstudent.avif);
            background-repeat: no-repeat;
            background-size: 100% 100%;
            backdrop-filter: blur(4px);
        }
    </style>

    <!-- Form Section -->
    <div class="container">
        <h2 class="text-center mb-4 mt-5">Add Student Details</h2>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <!-- First Name -->
                <div class="mb-3 d-flex justify-content-end">
                    {% if s.image %}
                        <img src="{{ s.image.url }}" alt="Profile Image" class="img-thumbnail" style="max-height: 200px; max-width: 150px;">
                    {% else %}
                        <p class="text-muted">No image uploaded</p>
                    {% endif %}
                </div>
                <div class="col-md-4 mb-3">
                    <label  class="form-label">First Name</label>
                    <input type="text" name="fname" class="form-control" value="{{ s.fname }}" placeholder="Enter first name" required>
                </div>

                <!-- Middle Name -->
                <div class="col-md-4 mb-3">
                    <label for="middleName" class="form-label">Middle Name</label>
                    <input type="text" name="mname" class="form-control" value="{{ s.mname }}" placeholder="Enter middle name">
                </div>

                <!-- Last Name -->
                <div class="col-md-4 mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" name="lname" class="form-control" value="{{ s.lname }}" placeholder="Enter last name" required>
                </div>
            </div>

            <div class="row">
                <!-- Gender -->
                <div class="mb-3 col-md-4">
                    <label for="gender" class="form-label">Gender</label>
                    <select name="gender" id="gender" class="form-select" required>
                        <option value="Male" {% if s.gender == 'Male' %}selected{% endif %}>Male</option>
                        <option value="Female" {% if s.gender == 'Female' %}selected{% endif %}>Female</option>
                    </select>
                </div>

                <!-- Email -->
                <div class="col-md-4 mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" name="email" class="form-control" value="{{ s.email }}" placeholder="Enter email" required>
                </div>

                <!-- Phone -->
                <div class="col-md-4 mb-3">
                    <label for="phone" class="form-label">Phone</label>
                    <input type="tel" name="phone" class="form-control" value="{{ s.phone }}" placeholder="Enter phone number" required>
                </div>
            </div>

            <!-- Address -->
            <div class="row">
            <div class="col-md-6 mb-3">
                <label for="address" class="form-label">Address</label>
                <textarea class="form-control" name="address"  rows="3" placeholder="Enter address" required>{{s.address}}</textarea>
            </div>

                <!-- City -->
                <div class="col-md-6 mb-3">
                    <label for="city" class="form-label">City</label>
                    <select class="form-select" value="{{s.city}}" name="city" id="city">
                        <option value="Ahemadabad" {% if s.city == 'Ahemadabad' %}selected{% endif %}>Ahemadabad</option>
                        <option value="Surendarnagar" {% if s.city == 'Surendarnagar' %}selected{% endif %}>Surendarnagar</option>
                        <option value="Bhavanagar" {% if s.city == 'Bhavanagar' %}selected{% endif %}>Bhavanagar</option>
                        <option value="Surat" {% if s.city == 'Surat' %}selected{% endif %}>Surat</option>
                        <option value="Gandhinagar" {% if s.city == 'Gandhinagar' %}selected{% endif %}>Gandhinagar</option>
                    </select>
                </div>

                <div class="col-md-4 mb-3">
                    <label  class="form-label">Courses</label>
                    <input type="text" name="coures" class="form-control" value="{{ s.coures }}" placeholder="Enter course" required>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="middleName" class="form-label">Fees</label>
                    <input type="number" name="amount" class="form-control" value="{{ s.amount }}" placeholder="Enter fees">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="lastName" class="form-label">Date of Admission</label>
                    <input type="date" name="admission_date" class="form-control" value="{{ s.admission_date|date:'Y-m-d' }}" placeholder="Enter last name" required>
                </div>
            </div>

                <div class="mb-3">
                    <label for="image" class="form-label">Profile Image</label>
                    <input type="file" name="image" id="image" class="form-control">
                </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center">
                <button type="submit" value="Submit" class="btn btn-primary">Submit</button>
                <button type="reset" value="Reset" class="btn btn-secondary">Reset</button>
            </div>
        </form>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let dateInput = document.getElementById("date");
            let today = new Date().toISOString().split("T")[0]; 
            dateInput.setAttribute("max", today); 
        });
    </script>
{% endblock body %}
